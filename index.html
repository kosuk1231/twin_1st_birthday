<!DOCTYPE html>
<html lang="ko">
<head>
    <!-- head 부분은 동일 -->
</head>
<body>
    <!-- 음악 시작 모달 -->
    <div class="music-modal" id="musicModal">
        <div class="music-modal-content">
            <h3 style="color: #D81B60; margin-bottom: 20px;">🎵 배경음악</h3>
            <p style="margin-bottom: 20px; color: #666;">은설이와 은채의 돌잔치에<br>배경음악과 함께 참여하시겠어요?</p>
            <button onclick="startMusic()">음악과 함께 시작</button>
            <button class="secondary" onclick="skipMusic()">음악 없이 시작</button>
        </div>
    </div>
    
    <div class="container">
        <h1>은설이와 은채의<br>첫 번째 생일에 초대합니다</h1>
        
        <p class="date">2025년 7월 5일(토) 오전 11시 30분</p>
        <p class="venue">더퍼스트클래스 강서NH서울타워점</p>
        
        <div class="divider">✿ ✿ ✿</div>
        
        <!-- 메인 이미지 경로 수정 -->
        <div class="gif-container">
            <img class="intro-img" src="./main-photo.gif" alt="은설이와 은채" onload="hideGifLoading(this)" onerror="handleImageError(this)">
            <div class="gif-loading">로딩 중...</div>
        </div>
        
        <div class="intro-text">
            <p>사랑스런 두 아이,<br>은설이와 은채가<br>세상에 온 지 벌써 1년이 되었습니다.</p>
            <p>처음 웃고, 처음 손을 잡아준 그 순간부터<br>우리는 매일 기적을 마주했습니다.</p>
            <p>소중한 첫 생일,<br>함께 축하해주시고 따뜻한 응원을 보내주세요.</p>
        </div>
        
        <!-- 나머지 섹션들은 동일하게 유지 -->
        <div class="section">
            <h3>가족 소개</h3>
            <div class="family-info">
                <p>할머니 소애숙</p>
                <p>외할아버지 민한훈, 외할머니 신춘덕</p>
                <p>외삼촌 민재원</p>
                <p>아빠 고석우, 엄마 민초원</p>
                <p>첫째 고은설, 둘째 고은채</p>
            </div>
        </div>
        
        <div class="section">
            <h3>돌잔치 D-Day</h3>
            <h3>7월</h3>
            <table>
                <thead>
                    <tr>
                        <th>일</th>
                        <th>월</th>
                        <th>화</th>
                        <th>수</th>
                        <th>목</th>
                        <th>금</th>
                        <th>토</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td></td>
                        <td></td>
                        <td>1</td>
                        <td>2</td>
                        <td>3</td>
                        <td>4</td>
                        <td style="background-color: #FCE4EC; font-weight: bold;">5<br>🎉돌잔치</td>
                    </tr>
                    <tr>
                        <td>6</td>
                        <td>7</td>
                        <td>8</td>
                        <td>9</td>
                        <td>10</td>
                        <td>11</td>
                        <td>12</td>
                    </tr>
                    <tr>
                        <td>13</td>
                        <td>14</td>
                        <td>15</td>
                        <td>16</td>
                        <td>17</td>
                        <td>18</td>
                        <td>19</td>
                    </tr>
                    <tr>
                        <td>20</td>
                        <td>21</td>
                        <td>22</td>
                        <td>23</td>
                        <td>24</td>
                        <td>25</td>
                        <td>26</td>
                    </tr>
                    <tr>
                        <td>27</td>
                        <td>28</td>
                        <td>29</td>
                        <td>30</td>
                        <td>31</td>
                        <td></td>
                        <td></td>
                    </tr>
                </tbody>
            </table>
        </div>
        
        <!-- 갤러리 섹션 - 추가 이미지가 있다면 업로드 후 경로 수정 -->
        <div class="section">
            <h3>갤러리</h3>
            <div class="gallery">
                <!-- 추가 이미지들이 있다면 여기에 추가 -->
                <div class="image-placeholder" style="width: calc(50% - 10px); min-height: 150px;">
                    🎂<br>추가 사진을<br>업로드해주세요
                </div>
                <div class="image-placeholder" style="width: calc(50% - 10px); min-height: 150px;">
                    👶👶<br>추가 사진을<br>업로드해주세요
                </div>
            </div>
        </div>
        
        <!-- 성장 타임라인도 동일하게 플레이스홀더로 유지 -->
        <div class="section">
            <h3>성장 타임라인</h3>
            <div class="timeline-item">
                <div class="image-placeholder timeline-img" style="max-width: 300px; min-height: 200px;">
                    🍼<br>탄생 순간<br>사진 추가 예정
                </div>
                <p class="timeline-date">2024년 7월</p>
                <p class="timeline-desc">두 아이의 탄생</p>
            </div>
            <div class="timeline-item">
                <div class="image-placeholder timeline-img" style="max-width: 300px; min-height: 200px;">
                    💯<br>100일 기념<br>사진 추가 예정
                </div>
                <p class="timeline-date">2024년 10월</p>
                <p class="timeline-desc">100일 기념일</p>
            </div>
            <div class="timeline-item">
                <div class="image-placeholder timeline-img" style="max-width: 300px; min-height: 200px;">
                    🧧<br>첫 명절<br>사진 추가 예정
                </div>
                <p class="timeline-date">2025년 1월</p>
                <p class="timeline-desc">첫 명절</p>
            </div>
            <div class="timeline-item">
                <div class="image-placeholder timeline-img" style="max-width: 300px; min-height: 200px;">
                    🎉<br>첫 번째 생일<br>사진 추가 예정
                </div>
                <p class="timeline-date">2025년 7월</p>
                <p class="timeline-desc">첫 번째 생일</p>
            </div>
        </div>
        
        <div class="section">
            <h3>오시는 길</h3>
            <div class="location">
                <p>더퍼스트클래스 강서NH서울타워점 클래스홀</p>
                <p>서울특별시 강서구 양천로 570 20층</p>
                <p>02-2013-5670</p>
                <a class="map-link" href="https://naver.me/5ss0AH07" target="_blank">네이버 지도에서 보기</a>
            </div>
        </div>
        
        <div class="section">
            <h3>참석 여부 알려주세요</h3>
            <div class="rsvp">
                <p>참석 정보를 알려주시면 감사하겠습니다.</p>
                <p>연락처: [전화번호 입력]</p>
            </div>
        </div>
        
        <div class="ending">✿ ✿ ✿</div>
        
        <div class="thanks">
            <p>소중한 첫 생일을<br>함께 축하해 주셔서 감사합니다.</p>
        </div>
    </div>
    
    <!-- Music Control Button -->
    <div class="music-control" id="musicControl" title="음악 재생/중지" onclick="toggleMusic()">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#F06292">
            <path d="M8 5v14l11-7z"/>
        </svg>
    </div>
    
    <!-- Music Status -->
    <div class="music-status" id="musicStatus">♪ 배경음악 재생 중</div>
    
    <!-- Background Music - 경로 수정 -->
    <audio id="bgMusic" loop preload="auto">
        <source src="./background-music.mp3" type="audio/mpeg">
    </audio>
    
    <!-- 스크립트 부분은 동일 -->
    <script>
        // 전역 변수
        let isPlaying = false;
        let musicInitialized = false;
        const bgMusic = document.getElementById('bgMusic');
        const musicControl = document.getElementById('musicControl');
        const musicModal = document.getElementById('musicModal');
        const musicStatus = document.getElementById('musicStatus');
        
        // GIF 로딩 완료 처리
        function hideGifLoading(img) {
            const container = img.parentElement;
            const loading = container.querySelector('.gif-loading');
            if (loading) {
                loading.style.display = 'none';
            }
        }
        
        // 이미지 로딩 실패 처리
        function handleImageError(img) {
            const container = img.parentElement;
            const loading = container.querySelector('.gif-loading');
            if (loading) {
                loading.style.display = 'none';
            }
            
            // 이미지를 플레이스홀더로 교체
            const placeholder = document.createElement('div');
            placeholder.className = 'img-error';
            placeholder.style.width = img.style.width || '100%';
            placeholder.style.height = img.style.height || '200px';
            placeholder.innerHTML = '📷<br>이미지를 불러올 수 없습니다';
            
            img.parentNode.replaceChild(placeholder, img);
        }
        
        // 음악 시작 함수
        function startMusic() {
            musicModal.classList.add('hidden');
            musicInitialized = true;
            
            // 음악 재생 시도
            const playPromise = bgMusic.play();
            
            if (playPromise !== undefined) {
                playPromise.then(() => {
                    isPlaying = true;
                    updateMusicControl();
                    showMusicStatus('♪ 배경음악 재생 중');
                }).catch(error => {
                    console.log('자동 재생 실패:', error);
                    showMusicStatus('🔇 음악 재생 실패 - 버튼을 클릭해주세요');
                });
            }
        }
        
        // 음악 없이 시작
        function skipMusic() {
            musicModal.classList.add('hidden');
            musicInitialized = true;
            showMusicStatus('🔇 음악 없이 진행 중');
        }
        
        // 음악 토글 함수
        function toggleMusic() {
            if (!musicInitialized) {
                startMusic();
                return;
            }
            
            if (isPlaying) {
                bgMusic.pause();
                isPlaying = false;
                showMusicStatus('⏸️ 음악 일시정지');
            } else {
                const playPromise = bgMusic.play();
                if (playPromise !== undefined) {
                    playPromise.then(() => {
                        isPlaying = true;
                        showMusicStatus('♪ 배경음악 재생 중');
                    }).catch(error => {
                        console.log('재생 실패:', error);
                        showMusicStatus('🔇 재생 실패 - 다시 시도해주세요');
                    });
                }
            }
            updateMusicControl();
        }
        
        // 음악 컨트롤 버튼 업데이트
        function updateMusicControl() {
            if (isPlaying) {
                musicControl.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#F06292"><path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"/></svg>';
                musicControl.title = '음악 일시정지';
            } else {
                musicControl.innerHTML = '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="#F06292"><path d="M8 5v14l11-7z"/></svg>';
                musicControl.title = '음악 재생';
            }
        }
        
        // 음악 상태 표시
        function showMusicStatus(message) {
            musicStatus.textContent = message;
            musicStatus.classList.add('show');
            
            setTimeout(() => {
                musicStatus.classList.remove('show');
            }, 3000);
        }
        
        // 음악 이벤트 리스너
        bgMusic.addEventListener('ended', function() {
            isPlaying = false;
            updateMusicControl();
            showMusicStatus('🔄 음악이 반복 재생됩니다');
        });
        
        bgMusic.addEventListener('error', function() {
            showMusicStatus('❌ 음악 파일을 불러올 수 없습니다');
        });
        
        // 볼륨 설정
        bgMusic.volume = 0.3;
        
        // 페이지 가시성 변경 시 음악 제어
        document.addEventListener('visibilitychange', function() {
            if (document.hidden && isPlaying) {
                bgMusic.pause();
            } else if (!document.hidden && isPlaying) {
                bgMusic.play().catch(console.log);
            }
        });
        
        // 페이지 로드 시 모든 이미지에 타임아웃 설정
        document.addEventListener('DOMContentLoaded', function() {
            const allImages = document.querySelectorAll('.gif-container img');
            allImages.forEach(img => {
                // 5초 후에도 로딩 중이면 로딩 표시 숨기기
                setTimeout(() => {
                    if (!img.complete) {
                        hideGifLoading(img);
                    }
                }, 5000);
            });
        });
    </script>
</body>
</html>
